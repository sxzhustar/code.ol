<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>OpenLayers</title>
<link href="http://localhost:8004/css/ol.css" rel="stylesheet">
<link href="http://localhost:8008/dijit/themes/claro/claro.css" rel="stylesheet">
<style type="text/css">
	html,body,#main{width:100%;height:100%;margin:0}
	a{text-decoration:none;font-size:16px;font-weight:bold;color:#4088FA}
	.claro .dijitContentPane{padding:0px;}
</style>
<script type="text/javascript">
	var dojoConfig = {isDebug:true,async:true};
</script>
<script src="http://localhost:8004/build/ol-debug.js" type="text/javascript"></script>
<script src="http://localhost:8008/dojo/dojo.js" type="text/javascript"></script>
<script type="text/javascript">
	require(['dojo/parser','dijit/layout/BorderContainer','dijit/layout/ContentPane',
	         'dijit/layout/AccordionContainer'],function(parser){
		parser.parse();
		
	});
	
/** GaoDe url
    url:'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}'
});*/
var map;
function zoom(type){
	var view = map.getView();
	var zoom = view.getZoom();
	switch (type) {
	case 'in':
		zoom += 1;
		break;
	case 'out':
		zoom -= 1;
		break;
	case 'default':
		zoom = 13;
		view.setCenter(ol.proj.transform([113.37,23.13],'EPSG:4326','EPSG:3857'))
		break;
	}
	view.setZoom(zoom);
}

function pan(direction){
	var view = map.getView();
	var center = view.getCenter();
	var extent = view.calculateExtent();
	var dx = (extent[2] - extent[0])/3;
	var dy = (extent[3] - extent[1])/3;
	switch (direction) {
	case "left":
		center[0] += dx;
		break;
	case "right":
		center[0] -= dx;
		break;
	case "up":
		center[1] -= dy;
		break;
	case "down":
		center[1] += dy;
		break;
	}
	view.setCenter(center);
	map.render();
}

function init(){
    var vecSrc = new ol.source.XYZ({
        url:"http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}"
    });
    var imgSrc = new ol.source.XYZ({url:"http://webst01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=6&x=${x}&y=${y}&z=${z}"});

    var posCtrl = new ol.control.MousePosition({
    	projection:'EPSG:4326',
    	coordinateFormat:ol.coordinate.createStringXY(3),
    	target:document.getElementById('pos')
    });
    
    map = new ol.Map({
    	target:'map',
    	layers:[new ol.layer.Tile({source:vecSrc})],
    	view:new ol.View({
    		projection:'EPSG:4326',
    		center:[113.37,23.13],
    		extent:[73,18,135,54],
    		maxZoom:18,
    		minZoom:4,
    		zoom:13
    	}),
    	controls:new ol.control.defaults({
            attributionOptions: {collapsible: false},
            zoom:true
            }).extend([posCtrl])
    });
    
    
}
</script>
</head>
<body class='claro' onload='init();'>
	<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'headline',gutters:false" id='main'>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'"
		 style="height:70px;border-bottom:solid 1px #B7BBB9;background:#CDE6FF">
		 	<div style="text-align:center;color:#5050FB;font:bold 1.5em arial;line-height:70px;">二维基础数据管理平台</div>
		 </div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'left',splitter:'true'" title='fuck'
		 style="width:300px;border-right:solid 1px #B7BBB9;margin:1;padding:0;">
		 	<div data-dojo-type='dijit/layout/AccordionContainer' style="overflow:hidden;z-index:29;">
		 		<div data-dojo-type='dijit/layout/ContentPane' title='图层管理'></div>
		 		<div data-dojo-type='dijit/layout/ContentPane' title='地图定位'></div>
		 		<div data-dojo-type='dijit/layout/ContentPane' title='地图查询'></div>
		 		<div data-dojo-type='dijit/layout/ContentPane' title='地图标注'></div>
		 		<div data-dojo-type='dijit/layout/ContentPane' title='空间分析'></div>
		 	</div>
		 </div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" style="overflow:hidden;">
			<div data-dojo-type="dijit/layout/ContentPane" style="width:100%;height:35px;line-height:35px;">
				<div style="text-align:right;background-color:#F2FBFF">
				<a href="javascript:;" onclick="pan('left');">左移</a>
				<a href="javascript:;" onclick="pan('right');">右移</a>
				<a href="javascript:;" onclick="pan('up');">上移</a>
				<a href="javascript:;" onclick="pan('down');">下移</a>
				<a href="javascript:;" onclick="zoom('in');">放大</a>
		  	 	<a href="javascript:;" onclick="zoom('out');">缩小</a>
				<a href="javascript:;" onclick="zoom('default');">广州</a>
				<a href="javascript:;" onclick="toFullScreen();">全屏</a>
				<a href="javascript:;" onclick="prevView();">前一试图</a>
				<a href="javascript:;" onclick="nextView();">后一试图</a>
				<a href="javascript:;" onclick="mDistance();">测距</a>
				<a href="javascript:;" onclick="mArea();">面积</a>
				</div>
			</div>
			<div data-dojo-type="dijit/layout/ContentPane" id='map' style='width:100%;height:96%'></div>
		</div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'right'"
		 style="width:3px;"></div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'bottom',splitter:'true'"
		 style="width:50px;text-align: center;border-top:solid 0.5px #B7BBB9;">版权信息@ZSX-2017/3/6</div>
	</div>
</body>
</html>