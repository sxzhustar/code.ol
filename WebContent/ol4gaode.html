<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>OpenLayers</title>
<link href="http://localhost:8004/css/ol.css">
<link href="http://localhost:8008/dijit/themes/tundra/tundra.css">
<style type="text/css">
	html,body,#main{width:100%;height:100%,margin:0}
 	.header{top:0px; width:100%;height:100px;border:solid 1px gray;text-align:right;}
 	.toolbar{heigth:40px;margin:60px 10px 0px 0px;} 
 	a{text-decoration:none;font-size:18px;font-weight:bolder;} 
 	.main{margin:0px;heigth:100%} 
 	.left{position:absolute;border:solid 1px gray;width:298px;top:110px;left:8px;bottom:10px;z-index:100}
  #map{position:absolute;border:solid 1px gray;left:306px;bottom:10px;top:110px;right:6px;} 
</style>
<script type="text/javascript">
	var dojoConfig = {isDebug:true,async:true};
</script>
<script src="http://localhost:8004/build/ol-debug.js" type="text/javascript"></script>
<script src="http://localhost:8008/dojo/dojo.js" type="text/javascript"></script>
<script type="text/javascript">
	require(['dojo/parser','dijit/layout/BorderContainer','dijit/layout/ContentPane'],function(parser){
		parser.parse();
		
	})
</script>
</head>
<body class='tundra' onload='init();'>
	<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'headline',gutters:false" id='main'>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'"
		 style="background-color:#b39b86;height:10%">ol4应用实战测试项目</div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'left',splitter:true"
		 style="background-color:#acb386;width:100px;"></div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" id='map'
		 style="background-color:#f5ffbf;padding:10px;"></div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'right',splitter:true"
		 style="background-color:#acb386;width:100px;"></div>
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'bottom',splitter:true"
		 style="background-color:#b39b86;width:50px;">版权信息@ZSX-2017/3/6</div>
	</div>
</body>
<!-- <body onload="init();" > -->
<!-- 	<div class='header'> -->
<!-- 		<div class='toolbar'> -->
<!-- 			<a href="javascript:;" onclick="pan('left');">左移</a> -->
<!-- 			<a href="javascript:;" onclick="pan('right');">右移</a> -->
<!-- 			<a href="javascript:;" onclick="pan('up');">上移</a> -->
<!-- 			<a href="javascript:;" onclick="pan('down');">下移</a> -->
<!-- 			<a href="javascript:;" onclick="zoom('in');">放大</a> -->
<!-- 		  <a href="javascript:;" onclick="zoom('out');">缩小</a> -->
<!-- 			<a href="javascript:;" onclick="zoom('default');">广州</a> -->
<!-- 			<a href="javascript:;" onclick="toFullScreen();">全屏</a> -->
<!-- 			<a href="javascript:;" onclick="prevView();">前一试图</a> -->
<!-- 			<a href="javascript:;" onclick="nextView();">后一试图</a> -->
<!-- 			<a href="javascript:;" onclick="mDistance();">测距</a> -->
<!-- 			<a href="javascript:;" onclick="mArea();">面积</a> -->
<!-- 		</div> -->
		
<!-- 	</div> -->
<!-- 	<div class='main'> -->
<!-- 		<div class='left'></div> -->
<!-- 		<div id='map'> -->
<!-- 			<div id='pos' style="position:absolute;z-index:2000;width:150px;height:30px;bottom:10px;left:20px;"></div> -->
<!-- 		</div> -->
<!-- 	</div> -->
<!-- </body> -->
<script type="text/javascript">
/** GaoDe url
    url:'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}'
});*/

var map;

function zoom(type){
	var view = map.getView();
	var zoom = view.getZoom();
	switch (type) {
	case 'in':
		zoom += 1;
		break;
	case 'out':
		zoom -= 1;
		break;
	case 'default':
		zoom = 13;
		view.setCenter(ol.proj.transform([113.37,23.13],'EPSG:4326','EPSG:3857'))
		break;
	}
	view.setZoom(zoom);
}

function pan(direction){
	var view = map.getView();
	var center = view.getCenter();
	var extent = view.calculateExtent();
	var dx = (extent[2] - extent[0])/3;
	var dy = (extent[3] - extent[1])/3;
	switch (direction) {
	case "left":
		center[0] += dx;
		break;
	case "right":
		center[0] -= dx;
		break;
	case "up":
		center[1] -= dy;
		break;
	case "down":
		center[1] += dy;
		break;
	}
	view.setCenter(center);
	map.render();
}

function init(){
    var vecSrc = new ol.source.XYZ({
        url:"http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}"
    });
    var imgSrc = new ol.source.XYZ({url:"http://webst01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=6&x=${x}&y=${y}&z=${z}"});

    var posCtrl = new ol.control.MousePosition({
    	projection:'EPSG:4326',
    	coordinateFormat:ol.coordinate.createStringXY(3),
    	target:document.getElementById('pos')
    });
    
    map = new ol.Map({
    	target:'map',
    	layers:[new ol.layer.Tile({source:vecSrc})],
    	view:new ol.View({
    		projection:'EPSG:4326',
    		center:[113.37,23.13],
    		extent:[73,18,135,54],
    		maxZoom:18,
    		minZoom:4,
    		zoom:13
    	}),
    	controls:new ol.control.defaults({
            attributionOptions: {collapsible: false},
            zoom:true
            }).extend([posCtrl])
    });
    
    
}
</script>
</html>